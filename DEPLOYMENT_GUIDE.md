# Deployment Guide

## Architecture
- **Frontend**: Vercel (React App)
- **Backend**: Render (Node.js + Express)
- **Database**: Render PostgreSQL

## Backend Deployment (Render)

### Using Blueprint (Recommended)
1. Go to https://render.com
2. Sign in with GitHub
3. Click "New +" → "Blueprint"
4. Select `dinobrefo/thinking-styles1` repository
5. Render will auto-detect `render.yaml`
6. Click "Apply"

### Manual Setup (Alternative)
1. Go to https://render.com/dashboard
2. Click "New +" → "Web Service"
3. Connect GitHub repository
4. Configure:
   - **Name**: thinking-styles-backend
   - **Root Directory**: `backend`
   - **Environment**: Node
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm start`
   - **Plan**: Free

5. Add PostgreSQL Database:
   - Click "New +" → "PostgreSQL"
   - Name: `thinking-styles-db`
   - Plan: Free
   - Copy the Internal Database URL

6. Add Environment Variables:
   ```
   NODE_ENV=production
   PORT=5001
   DATABASE_URL=[paste database URL from step 5]
   JWT_SECRET=[generate a random secret]
   FRONTEND_URL=https://your-vercel-app.vercel.app
   ```

## Frontend Deployment (Vercel)

1. Go to https://vercel.com/new
2. Import `dinobrefo/thinking-styles1` from GitHub
3. Configure:
   - **Framework Preset**: Create React App
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build`
   - **Output Directory**: `build`

4. Add Environment Variable:
   - Key: `REACT_APP_API_URL`
   - Value: `https://your-render-backend.onrender.com/api`

5. Click "Deploy"

## Post-Deployment Steps

1. **Update Backend CORS**:
   After Vercel deployment, update `FRONTEND_URL` in Render environment variables with your Vercel URL

2. **Update Frontend API URL**:
   In Vercel, set `REACT_APP_API_URL` to your Render backend URL

3. **Redeploy if needed**:
   Both platforms support automatic deployments on git push

## URLs
- Frontend: `https://thinking-styles1.vercel.app`
- Backend: `https://thinking-styles-backend.onrender.com`
- API Endpoint: `https://thinking-styles-backend.onrender.com/api`

## Environment Variables Summary

### Backend (Render)
```env
NODE_ENV=production
PORT=5001
DATABASE_URL=[Auto-generated by Render PostgreSQL]
JWT_SECRET=[Random secure string]
FRONTEND_URL=[Your Vercel URL]
```

### Frontend (Vercel)
```env
REACT_APP_API_URL=[Your Render backend URL]/api
```

## Troubleshooting

### Backend Issues
- Check Render logs: Dashboard → Service → Logs
- Verify DATABASE_URL is set
- Ensure PostgreSQL is running

### Frontend Issues
- Check Vercel deployment logs
- Verify REACT_APP_API_URL is correct
- Check browser console for CORS errors

### Database Issues
- Verify PostgreSQL service is running
- Check connection string format
- Review database logs in Render

## Notes
- Render free tier may sleep after 15 minutes of inactivity
- First request after sleep takes ~30 seconds to wake up
- Vercel has no sleep time
- PostgreSQL database is persistent across deployments
